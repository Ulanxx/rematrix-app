# 实施任务清单

## 1. 增强 SCRIPT 步骤的视觉建议生成

- [x] 1.1 更新 `scriptOutputSchema`，添加 `visualSuggestions` 字段
- [x] 1.2 更新 SCRIPT 步骤的 AI Prompt，要求生成视觉建议
- [x] 1.3 添加数据识别逻辑，自动识别适合可视化的内容
- [x] 1.4 为每页生成具体的视觉建议（图表类型、布局方式、视觉元素）
- [ ] 1.5 测试 SCRIPT 步骤生成的视觉建议质量

## 2. 扩展页面元素类型定义

- [x] 2.1 在 `ppt.types.ts` 中添加新的元素类型定义
  - [x] 数据图表元素（chart）
  - [x] 图标元素（icon）
  - [x] 形状元素（shape）
  - [x] 表格元素（table）
  - [x] 代码元素（code）
- [x] 2.2 定义图表类型枚举（bar、line、pie、radar、number-card 等）
- [x] 2.3 定义元素样式接口（颜色、大小、位置、效果等）
- [x] 2.4 更新 `PptSlideData` 类型，支持新的元素类型

## 3. 增强 PAGES 步骤的 AI Prompt

- [x] 3.1 在 AI Prompt 中添加视觉元素设计指导
  - [x] 数据可视化指导（何时使用图表、如何设计图表）
  - [x] 布局设计指导（卡片式、分栏、网格等）
  - [x] 视觉元素指导（图标、装饰、色块等）
  - [x] 现代设计风格指导（玻璃拟态、渐变、阴影等）
- [x] 3.2 提供具体的设计示例和参考
- [x] 3.3 强调内容驱动的视觉选择原则
- [x] 3.4 要求每页设计独特、避免千篇一律

## 4. 优化 PPT 生成服务

- [x] 4.1 集成外部库（Chart.js、Lucide Icons）
- [x] 4.2 实现灵活的元素渲染逻辑
  - [x] 图表元素渲染（使用 Chart.js）
  - [x] 图标元素渲染（支持 Lucide 和 FontAwesome）
  - [x] 形状元素渲染（使用 SVG）
  - [x] 图片和分割线渲染
- [x] 4.3 增强 CSS 样式生成能力
  - [x] 支持玻璃拟态效果
  - [x] 支持复杂渐变
  - [x] 支持阴影和深度效果
  - [x] 支持现代布局（Flexbox、Grid）
- [x] 4.4 优化元素组合和布局算法

## 5. 实现数据可视化功能

- [x] 5.1 实现图表生成（使用 Chart.js）
  - [x] 柱状图（bar、horizontal-bar）
  - [x] 折线图（line）
  - [x] 饼图（pie）
  - [x] 数据绑定和渲染
  - [x] 样式和配置
- [x] 5.2 实现数字卡片生成
  - [x] 大数字展示
  - [x] 标签和描述
  - [x] 装饰和背景
- [x] 5.3 实现形状和图标
  - [x] SVG 形状（圆形、三角形、星形、矩形、线条）
  - [x] Lucide 图标支持
  - [x] FontAwesome 图标支持

## 6. 优化页面生成逻辑

- [x] 6.1 更新 `customExecutePagesStep` 函数
  - [x] 优先使用 AI 生成的 pptSlidesData
  - [x] 支持降级到从 script 生成
  - [x] 正确传递 AI 生成的视觉元素
- [x] 6.2 保留 `generatePptSlides` 作为降级方案
  - [x] 支持新的元素类型
  - [x] 优化布局算法
  - [x] 增强样式生成

## 7. 测试和验证

- [ ] 7.1 编写单元测试
  - [ ] SCRIPT 步骤视觉建议生成测试
  - [ ] 元素类型定义测试
  - [ ] 图表渲染测试
- [ ] 7.2 编写集成测试
  - [ ] 完整的页面生成流程测试
  - [ ] 不同内容类型的视觉效果测试
- [ ] 7.3 手动测试和视觉验证
  - [ ] 生成多个示例 PPT
  - [ ] 验证视觉效果和设计质量
  - [ ] 收集反馈和优化

## 8. 文档和示例

- [ ] 8.1 更新 API 文档
  - [ ] 新的元素类型说明
  - [ ] 视觉建议格式说明
- [ ] 8.2 编写设计指南
  - [ ] 视觉元素使用指南
  - [ ] 布局设计最佳实践
  - [ ] 色彩和样式规范
- [ ] 8.3 创建示例 PPT
  - [ ] 数据可视化示例
  - [ ] 不同布局示例
  - [ ] 现代设计风格示例

## 任务依赖关系

- 任务 2 必须在任务 4 之前完成（类型定义先于实现）
- 任务 1 必须在任务 3 之前完成（SCRIPT 生成视觉建议，PAGES 使用建议）
- 任务 5 依赖任务 2 和任务 4（数据可视化基于元素类型和渲染逻辑）
- 任务 6 依赖任务 1、2、4、5（页面生成整合所有功能）
- 任务 7 在所有实现任务完成后进行

## 预估工作量

- 任务 1：2-3 小时
- 任务 2：1-2 小时
- 任务 3：2-3 小时
- 任务 4：4-6 小时
- 任务 5：6-8 小时
- 任务 6：3-4 小时
- 任务 7：4-6 小时
- 任务 8：2-3 小时

**总计**：24-35 小时

## 风险和注意事项

1. **AI 生成质量**：AI 可能无法准确理解视觉建议要求，需要多次调整 Prompt
2. **图表渲染复杂度**：SVG 图表渲染可能比预期复杂，需要考虑使用图表库
3. **性能问题**：复杂的视觉元素可能影响页面生成速度，需要优化
4. **兼容性**：确保生成的 HTML/CSS 在不同浏览器中正常显示
5. **设计一致性**：在保持创意自由的同时，需要确保整体设计风格统一
